{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/isaac/sites/pdp-next/pages/press.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Sanity from '../sanity-client.js';\nimport Header from '../components/Header.js';\nimport Footer from '../components/Footer.js';\nimport Document from '../components/Document.js';\nimport autoBind from 'react-autobind';\nimport BottomScrollListener from 'react-bottom-scroll-listener';\n\nvar Press =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Press, _React$Component);\n\n  function Press() {\n    var _this;\n\n    _classCallCheck(this, Press);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Press).call(this));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      clips: []\n    });\n\n    autoBind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Press, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setState({\n        clips: this.props.data\n      });\n    }\n  }, {\n    key: \"getNextPage\",\n    value: function () {\n      var _getNextPage = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var startIndex, endIndex, query, newData, oldData;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                startIndex = this.state.clips.length;\n                endIndex = startIndex + this.props.pageIncrement;\n                query = \"*[_type == \\\"pressclip\\\"] | order(date desc) [\".concat(startIndex, \"...\").concat(endIndex, \"]\");\n                _context.next = 5;\n                return Sanity.fetch(query, {});\n\n              case 5:\n                newData = _context.sent;\n                oldData = this.state.clips;\n                this.setState({\n                  clips: oldData.concat(newData)\n                });\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getNextPage() {\n        return _getNextPage.apply(this, arguments);\n      }\n\n      return getNextPage;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var clips = this.state.clips.map(function (itemData) {\n        return __jsx(Document, {\n          data: itemData,\n          image: \"heroImage\",\n          headline: \"title\",\n          body: \"body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 31\n          },\n          __self: this\n        });\n      });\n      return __jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34\n        },\n        __self: this\n      }, __jsx(\"title\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }, \"PDP\"), __jsx(Header, {\n        CurrentPage: \"Event\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      }), clips, __jsx(BottomScrollListener, {\n        onBottom: this.getNextPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38\n        },\n        __self: this\n      }), __jsx(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Press;\n}(React.Component);\n\nPress.getInitialProps =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(context) {\n    var pageIncrement, query, data;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            // Get event data\n            pageIncrement = 2;\n            query = \"*[_type == \\\"pressclip\\\"] | order(date desc) [0...\".concat(pageIncrement, \"]\");\n            _context2.next = 4;\n            return Sanity.fetch(query, {});\n\n          case 4:\n            data = _context2.sent;\n            return _context2.abrupt(\"return\", {\n              data: data,\n              pageIncrement: pageIncrement\n            });\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default Press;","map":{"version":3,"sources":["/Users/isaac/sites/pdp-next/pages/press.js"],"names":["React","Sanity","Header","Footer","Document","autoBind","BottomScrollListener","Press","clips","setState","props","data","startIndex","state","length","endIndex","pageIncrement","query","fetch","newData","oldData","concat","map","itemData","getNextPage","Component","getInitialProps","context"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,QAAP,MAAqB,2BAArB;AACA,OAAOC,QAAP,MAAqB,gBAArB;AACA,OAAOC,oBAAP,MAAiC,8BAAjC;;IAEMC,K;;;;;AACJ,mBAAc;AAAA;;AAAA;;AACZ;;AADY,4DAKN;AACNC,MAAAA,KAAK,EAAE;AADD,KALM;;AAEZH,IAAAA,QAAQ,+BAAR;AAFY;AAGb;;;;wCAKkB;AACjB,WAAKI,QAAL,CAAc;AAACD,QAAAA,KAAK,EAAE,KAAKE,KAAL,CAAWC;AAAnB,OAAd;AACD;;;;;;;;;;;;AAEKC,gBAAAA,U,GAAa,KAAKC,KAAL,CAAWL,KAAX,CAAiBM,M;AAC9BC,gBAAAA,Q,GAAWH,UAAU,GAAG,KAAKF,KAAL,CAAWM,a;AACnCC,gBAAAA,K,2DAAuDL,U,gBAAgBG,Q;;uBACvDd,MAAM,CAACiB,KAAP,CAAaD,KAAb,EAAoB,EAApB,C;;;AAAhBE,gBAAAA,O;AACAC,gBAAAA,O,GAAU,KAAKP,KAAL,CAAWL,K;AACzB,qBAAKC,QAAL,CAAc;AAACD,kBAAAA,KAAK,EAACY,OAAO,CAACC,MAAR,CAAeF,OAAf;AAAP,iBAAd;;;;;;;;;;;;;;;;;;6BAEM;AACN,UAAIX,KAAK,GAAG,KAAKK,KAAL,CAAWL,KAAX,CAAiBc,GAAjB,CAAqB,UAAAC,QAAQ;AAAA,eACvC,MAAC,QAAD;AAAU,UAAA,IAAI,EAAEA,QAAhB;AAA0B,UAAA,KAAK,EAAE,WAAjC;AAA8C,UAAA,QAAQ,EAAE,OAAxD;AAAiE,UAAA,IAAI,EAAE,MAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADuC;AAAA,OAA7B,CAAZ;AAGA,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EAEE,MAAC,MAAD;AAAQ,QAAA,WAAW,EAAC,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAGGf,KAHH,EAIE,MAAC,oBAAD;AAAsB,QAAA,QAAQ,EAAE,KAAKgB,WAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,EAKE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,CADF;AASD;;;;EAjCiBxB,KAAK,CAACyB,S;;AAoC1BlB,KAAK,CAACmB,eAAN;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAwB,kBAAeC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AACtB;AACMX,YAAAA,aAFgB,GAEA,CAFA;AAGlBC,YAAAA,KAHkB,+DAGyCD,aAHzC;AAAA;AAAA,mBAILf,MAAM,CAACiB,KAAP,CAAaD,KAAb,EAAoB,EAApB,CAJK;;AAAA;AAIlBN,YAAAA,IAJkB;AAAA,8CAKf;AAACA,cAAAA,IAAI,EAAEA,IAAP;AAAaK,cAAAA,aAAa,EAAEA;AAA5B,aALe;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAxB;;AAAA;AAAA;AAAA;AAAA;;AAQA,eAAeT,KAAf","sourcesContent":["import React from 'react'\nimport Sanity from '../sanity-client.js'\nimport Header from '../components/Header.js'\nimport Footer from '../components/Footer.js'\nimport Document from '../components/Document.js'\nimport autoBind from 'react-autobind';\nimport BottomScrollListener from 'react-bottom-scroll-listener';\n\nclass Press extends React.Component {\n  constructor() {\n    super();\n    autoBind(this);\n  }\n\n  state = {\n    clips: []\n  }\n  componentDidMount(){\n    this.setState({clips: this.props.data})\n  }\n  async getNextPage(){\n    var startIndex = this.state.clips.length\n    var endIndex = startIndex + this.props.pageIncrement\n    var query = `*[_type == \"pressclip\"] | order(date desc) [${startIndex}...${endIndex}]`\n    var newData = await Sanity.fetch(query, {})\n    var oldData = this.state.clips\n    this.setState({clips:oldData.concat(newData)})\n  }\n  render(){\n    var clips = this.state.clips.map(itemData => (\n      <Document data={itemData} image={\"heroImage\"} headline={\"title\"} body={\"body\"}/>\n    ))\n    return(\n      <div>\n        <title>PDP</title>\n        <Header CurrentPage=\"Event\"/>\n        {clips}\n        <BottomScrollListener onBottom={this.getNextPage}/>\n        <Footer/>\n      </div>\n    )\n  }\n}\n\nPress.getInitialProps = async function(context){\n  // Get event data\n  const pageIncrement = 2\n  var query = `*[_type == \"pressclip\"] | order(date desc) [0...${pageIncrement}]`\n  var data = await Sanity.fetch(query, {})\n  return {data: data, pageIncrement: pageIncrement}\n}\n\nexport default Press;\n"]},"metadata":{},"sourceType":"module"}