{"ast":null,"code":"import _getIterator from \"@babel/runtime-corejs2/core-js/get-iterator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Link from 'next/link';\nimport Sanity from '../sanity-client.js';\nimport Header from '../components/Header.js';\nimport Carousel from '../components/Carousel.js';\nimport DocumentList from '../components/DocumentList.js';\nimport Footer from '../components/Footer.js';\nimport { sortByTimeDelta } from '../helperFunctions.js';\nimport '../styles/index.sass';\n\nvar getData =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var currentDate, query, data, sortedData;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            // Get announcements and events to display on page\n            currentDate = new Date().toISOString();\n            query = \"*[(_type == \\\"event\\\" && date >= \\\"\".concat(currentDate, \"\\\") || _type == \\\"announcement\\\"]\");\n            _context.next = 4;\n            return Sanity.fetch(query, {});\n\n          case 4:\n            data = _context.sent;\n            // Sort data by timeDelta value in ascending order\n            sortedData = sortByTimeDelta(data);\n            return _context.abrupt(\"return\", {\n              data: sortedData\n            });\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getData() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar Index =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Index, _React$Component);\n\n  function Index() {\n    _classCallCheck(this, Index);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Index).apply(this, arguments));\n  }\n\n  _createClass(Index, [{\n    key: \"render\",\n    value: function render() {\n      var Events = this.props.data.filter(function (obj) {\n        return obj._type === \"event\";\n      });\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = _getIterator(Events), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var event = _step.value;\n          event.readableDate = new Date(event.date).toLocaleString([], {\n            year: 'numeric',\n            month: '2-digit',\n            day: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit'\n          });\n          event.readablePrice = event.price == 0 ? '' : \"$\" + event.price;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      var Announcements = this.props.data.filter(function (obj) {\n        return obj._type === \"announcement\";\n      });\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = _getIterator(Announcements), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var announcement = _step2.value;\n          announcement.readableDate = new Date(announcement._createdAt).toLocaleString([], {\n            year: 'numeric',\n            month: '2-digit',\n            day: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit'\n          });\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return __jsx(\"div\", null, __jsx(\"title\", null, \"PDP - Projects\"), __jsx(Header, {\n        CurrentPage: \"Home\"\n      }), __jsx(Carousel, {\n        data: this.props.data\n      }), __jsx(\"div\", {\n        id: \"AboutContainer\"\n      }, __jsx(\"div\", {\n        id: \"MissionStatement\"\n      }, __jsx(\"h3\", null, \"Our Mission\"), __jsx(\"p\", null, \"The mission of Philadelphia Dance Projects is to support contemporary dance through Projects that encourage artists and audiences to more fully participate and engage in the experience and pursuit of dance as an evolving form.\"))), __jsx(\"div\", {\n        id: \"Lists\"\n      }, __jsx(\"div\", {\n        id: \"Upcoming\"\n      }, __jsx(\"h1\", {\n        id: \"UpcomingHeader\"\n      }, \"Upcoming:\"), __jsx(DocumentList, {\n        data: Events,\n        headline: \"title\",\n        primaryDetail: \"readableDate\",\n        secondaryDetail: \"readablePrice\",\n        image: \"image\",\n        maxLength: 3,\n        body: \"Description\"\n      })), __jsx(\"div\", {\n        id: \"Announcements\"\n      }, __jsx(\"h1\", {\n        id: \"AnnouncementsHeader\"\n      }, \"Announcements:\"), __jsx(DocumentList, {\n        data: Announcements,\n        headline: \"title\",\n        primaryDetail: \"readableDate\",\n        secondaryDetail: null,\n        image: \"heroImage\",\n        maxLength: 3,\n        body: \"body\"\n      }))), __jsx(Footer, null));\n    }\n  }]);\n\n  return Index;\n}(React.Component);\n\nIndex.getInitialProps = getData;\nexport default Index;","map":null,"metadata":{},"sourceType":"module"}